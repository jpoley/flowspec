---
id: task-212
title: Build AI-Powered Vulnerability Triage Engine
status: Done
assignee:
  - '@muckross'
created_date: '2025-12-03 01:58'
updated_date: '2025-12-04 21:13'
labels:
  - 'workflow:Planned'
  - security
dependencies: []
priority: high
---

## Description

<!-- SECTION:DESCRIPTION:BEGIN -->
Implement AI classification and prioritization of security findings with plain-English explanations. Foundation for /jpspec:security triage command.
<!-- SECTION:DESCRIPTION:END -->

## Acceptance Criteria
<!-- AC:BEGIN -->
- [ ] #1 AI classifies findings as TP/FP/NI with confidence scores
- [ ] #2 Risk scoring formula: (impact Ã— exploitability) / detection_time
- [ ] #3 Cluster findings by CWE, file, and architectural pattern
- [ ] #4 Generate plain-English explanations (What, Why, How to Exploit, How to Fix)
- [ ] #5 Interactive mode for confirming AI decisions
- [ ] #6 Triage accuracy >85% on benchmark dataset
<!-- AC:END -->

## Implementation Plan

<!-- SECTION:PLAN:BEGIN -->
## CORRECTED Implementation Plan

**CRITICAL: No API calls. AI = Skills only.**

### Phase 1: Python Orchestration (No AI)
- Create `src/specify_cli/scanners/unified_format.py`
  - Define JSON schema for findings
  - Model: Finding, Severity, Location
- Update `src/specify_cli/scanners/semgrep.py`
  - Write findings to `docs/security/findings.json`
- **NO AI/LLM logic in Python**

### Phase 2: AI Skill Creation
- Create `.claude/skills/security-triage.md`
  - Instructions for classifying findings (TP/FP/NI)
  - Risk scoring methodology
  - Root cause clustering logic
  - Remediation guidance format
- Skill is markdown prompt, NOT Python code

### Phase 3: Slash Command
- Create `.claude/commands/jpspec-security-triage.md`
  - Invokes security-triage skill
  - Reads `docs/security/findings.json`
  - AI coding tool (Claude Code) executes skill
  - Writes `docs/security/triage-results.json`

### Phase 4: Testing
- Create test dataset: `tests/security/fixtures/test-findings.json`
- Run `/jpspec:security triage`
- Verify AI coding tool generates triage-results.json
- **NO API calls during test**

### Success Criteria
- [ ] findings.json schema defined
- [ ] security-triage.md skill created
- [ ] Slash command invokes skill
- [ ] AI coding tool generates triage-results.json
- [ ] **ZERO API DEPENDENCIES**

### Files Created
- `src/specify_cli/scanners/unified_format.py`
- `.claude/skills/security-triage.md`
- `.claude/commands/jpspec-security-triage.md`
- `tests/security/fixtures/test-findings.json`
<!-- SECTION:PLAN:END -->
